(function(){function g(a){if(a.length%2===0)throw new Error("findMedianValue is only implemented for odd length arrays");return a.sort(function(a,b){return a-b}),a[(a.length-1)/2]}function h(c){a.then(function(){a.open(b)}),a.then(function(){a.evaluate(function(a){ARCPLAN.clientRedesign=a===!0},c)}),a.then(function(){a.evaluate(function(){ARCPLAN.casperTestVariables={},ARCPLAN.casperTestVariables.onDocumentLoadedHasBeenCalled=!1,ARCPLAN.oOnDocumentLoaded=function(){ARCPLAN.casperTestVariables.onDocumentLoadedHasBeenCalled=!0}})}),a.waitFor(function(){return a.evaluate(function(){return ARCPLAN.casperTestVariables.onDocumentLoadedHasBeenCalled===!0?!0:!1})})}function i(b){var c;a.then(function(){c=Date.now()}),h(b),a.then(function(){var f=Date.now()-c;console.log("document loaded in "+f+" milliseconds"+(b===!0?"(with redesign flag)":"")),b===!0?d.push(f):e.push(f)}),a.then(function(){var d="buttonPerformance"+(b?"_redesign":"")+".png";a.capture(d)})}var a=require("casper").create({exitOnError:!1,waitTimeout:2e4,onWaitTimeout:function(){a.test.fail("onWaitTimeout!!!")}}),b,c=!0,d=[],e=[],f;a.cli.args.length!==1&&(a.echo("---"),a.echo("Expected Parameters:"),a.echo("1: Url to the buttonPerformance html start page"),a.echo("Example usage: casperjs.bat buttonPerformance.casper.js http://localhost/buttonPerformance.html"),a.echo("     (Prerequisites: the folder containing phantomJS.exe is in the PATH)"),a.echo("---"),a.exit()),b=a.cli.args[0],a.on("resource.received",function(a){a.status!==200&&a.status!==304&&this.test.fail("http response has code:"+a.status+JSON.stringify(a))}),a.on("page.error",function(a,b){this.test.error(a),this.test.fail(a)}),a.start(),h();for(f=0;f<7;f+=1)i(),i(c);a.then(function(){console.log("median time without redesign flag: "+g(e)),console.log("median time with redesign flag: "+g(d))}),a.run()})()