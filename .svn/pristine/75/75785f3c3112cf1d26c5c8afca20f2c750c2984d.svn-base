require(["components/button/buttonbuilder","components/button/button"],function(a,b){describe("buttonbuilder createArcplanObject",function(){it("should return an object with functions insertIntoContainer and update",function(){var b,c={ObjectData:{value:"test content"},ObjectProperties:{}};a.setOnButtonClickCallback(jasmine.createSpy()),b=a.createArcplanObject("docname",c),expect(typeof b.insertIntoContainer).toEqual("function"),expect(typeof b.update).toEqual("function")}),describe("insertIntoContainer",function(){it("should call the insertIntoContainer function of the created button, passing the container",function(){var c=$('<div id="testContainer"></div>'),d,e={ObjectData:{value:"buttonContent"},ObjectProperties:{}},f=jasmine.createSpy();spyOn(b,"createButton").andReturn({insertIntoContainer:f,viewModelChanged:jasmine.createSpy()}),a.setOnButtonClickCallback(jasmine.createSpy()),d=a.createArcplanObject("docname",e),d.insertIntoContainer(c),expect(f).toHaveBeenCalledWith(c)})}),describe("update",function(){it("should call the viewModelChanged function of the button if the node contains different data",function(){var c,d={ObjectData:{value:"the initial value"},ObjectProperties:{}},e={ObjectData:{value:"the updated value"}},f=jasmine.createSpy();spyOn(b,"createButton").andReturn({insertIntoContainer:jasmine.createSpy(),viewModelChanged:f}),c=a.createArcplanObject("docname",d),c.update(e),expect(f).toHaveBeenCalled()}),it("should not call the viewModelChanged function of the button if the node contains the same data",function(){var c,d={ObjectData:{value:"my favourite number"},ObjectProperties:{}},e={ObjectData:{value:"my favourite number"}},f=jasmine.createSpy();spyOn(b,"createButton").andReturn({insertIntoContainer:jasmine.createSpy(),viewModelChanged:f}),c=a.createArcplanObject("docname",d),c.update(e),expect(f).not.toHaveBeenCalled()})}),describe("integration test, all the button parts working together",function(){it("should create a button whose click event callback calls the builders onButtonClickCallback",function(){var b=$('<div id="testContainer"></div>'),c,d={ObjID:"345",ObjectData:{value:"buttonContent"},ObjectProperties:{Events:{Elements:[{Event:{Type:"OnClick"}}]}}},e=jasmine.createSpy(),f;a.setOnButtonClickCallback(e),c=a.createArcplanObject("docname",d),c.insertIntoContainer(b),f=$.Event("click",{shiftKey:!1,ctrlKey:!0}),b.find("button").trigger(f),expect(e).toHaveBeenCalledWith("docname","345",!1,!0)})})})})