define("events/eventsetterfactory",["events/eventcallbacks","events/eventdatafactory","draganddrop","logger","properties","tools","htmleditor","texthtmlgenerator","textinput"],function(a,b,c,d,e,f,g,h,i){function j(){function m(c){switch(e.getObjType(c)){case"RadioGroup":break;case"VerticalHierarchie":case"HorizontalHierarchie":case"MenuHierarchie":break;case"Menu":break;default:c.on("click",b.createInstance(c[0].id,c),a.onClick).addClass("arcClickable")}}function n(b){switch(e.getObjType(b)){case"RadioGroup":case"VerticalHierarchie":case"HorizontalHierarchie":case"MenuHierarchie":case"Menu":break;default:b.off("click",a.onClick).removeClass("arcClickable")}}function o(a){switch(e.getObjType(a)){case"Field":case"Row":case"Column":case"Table":case"Menu":case"MenuHierarchie":case"HorizontalHierarchie":case"VerticalHierarchie":c.makeDropable(a)}}function p(c,d){q(c),$("button",c).on("mouseup.eventsetter",function(a){e.getYSettingValue(c)===1&&$(this).removeClass("arcChecked")}).on("mousedown.eventsetter",function(a){e.getYSettingValue(c)===0&&$(this).addClass("arcChecked")}).addClass("arcClickable").on("click.eventsetter",b.createInstance(d,c),a.clickOnSwitch)}function q(a){$("button",a).off("mouseup.eventsetter").off("mousedown.eventsetter").off("click.eventsetter").removeClass("arcClickable")}function r(c,d){c.off("click",a.onMenuClick),$("select",c).length>0?$("select",c).on("change",b.createInstance(d,c),a.onChange).addClass("arcChangeable"):c.on("click",b.createInstance(d,c),a.onMenuClick).addClass("arcClickable")}function s(c,d){var e=c.children(":first"),f=b.createInstance(d,c),g=b.createInstance(d,c);f.eventCallbacks=a,g.eventCallbacks=a,e.length>0&&(e.off("keypress"),e.on("keypress",f,a.onTableKeyPress),e.off("keydown"),e.on("keydown",g,a.onTableKeyDown))}function t(b){b.off("click",a.onMenuClick),$("select",b).off("select",a.onChange)}function u(a,b,c,d){var e;a.off("click.eventsetter",c.onClickEditableObj),a.off("click.eventsetter",c.onClickNonEditableObj),a.removeClass("arcTextInputActive"),a.find(".arcTextInputSizeTarget").removeClass("arcTextInputSizeTarget"),e=c.createExtendedEventDataForInput(a,b),d?a.on("click.eventsetter",e,c.onClickEditableObj):a.on("click.eventsetter",e,c.onClickNonEditableObj)}function v(a){var b=$("#"+a.data.id),c=e.getFont(b),d=$("textarea",b).html(),f=h.convertTextToHtml(d,c);b.children().first().css("display","none"),h.buildHtmlForNotInitialHtmlText(b),g.initializeEditorForNotInitialHtmlText(b,$("div[contenteditable]",b),f)}function w(a,b,c,d){var e;a.off("click.eventsetter",v),e=c.createExtendedEventDataForInput(a,b),d&&a.on("click.eventsetter",e,v)}var j,k,l={};return l.setEvents=function(c,g){var h=g[0].id;c&&c.Events&&e.isActive(g)&&(g.off("click",a.onClick),g.off("click",a.onInput),f.iterateArcplanArray(c.Events,function(c,f){switch(f.Type){case"OnClick":m(g),e.setHasClickEvent(g,!0);break;case"OnInput":e.getObjType(g)==="CheckboxGroup"&&(g.on("click",b.createInstance(h,g),a.onInput),e.setHasInputEvent(g,!0));break;case"OnDrop":o(g);break;case"OnChange":case"OnExit":case"OnSwitch":case"OnCheck":case"OnUnCheck":case"OnComment":break;default:d.warn('Unhandled event type: "'+f.Type+'" for object: '+h)}}))},l.setDragEvents=function(a){switch(e.getObjType(a)){case"Field":case"Row":case"Column":case"Table":case"Menu":case"MenuHierarchie":case"HorizontalHierarchie":case"VerticalHierarchie":c.makeDraggable(a)}},l.setTypeSpecificEvents=function(c){var d=c[0].id;if(e.isActive(c))switch(e.getObjType(c)){case"Menu":r(c,d);break;case"RadioGroup":$("input",c).on("click",b.createInstance(d,c),a.onChange).addClass("arcClickable");break;case"Switch":p(c,d);break;case"VerticalHierarchie":case"HorizontalHierarchie":case"MenuHierarchie":c.off("click",a.onHierClick),c.on("click",b.createInstance(d,c),a.onHierClick),$(".arcHier",c).off("mousedown",a.onHierMouseDown),$(".arcHier",c).on("mousedown",b.createInstance(d,c),a.onHierMouseDown),(e.getHasClickEvent(c)||e.getObjType(c)==="MenuHierarchie")&&c.addClass("arcClickable");break;case"Table":case"Column":case"Row":case"Field":s(c,d)}},l.setEventForInput=function(a,b,c){var d,f=e.getIsEditable(a),h=e.isActive(a),i=h&&f,j=e.getObjType(a),k,l=e.isFormattedTextInput(a);switch(j){case"Field":case"Column":case"Row":case"Table":j==="Field"&&e.isVHTMLField(a)?g.initializeEditorForVHTMLField(a,$("div[contenteditable]",a),e.getHtmlSource(a)):u(a,b,c,i);break;case"Text":k=e.getContent(a),a.off("click.eventsetter",v),typeof k=="object"?g.initializeEditor(a,$("div[contenteditable]",a),k.HtmlSource):l?w(a,b,c,i):u(a,b,c,i);break;default:}},l.removeAllEvents=function(b){if(b.length===0)return;switch(e.getObjType(b)){case"Menu":t(b);break;case"RadioGroup":$("input",b).off("click",a.onChange).removeClass("arcClickable");break;case"Switch":q(b);break;case"VerticalHierarchie":case"HorizontalHierarchie":case"MenuHierarchie":b.off("click",a.onHierClick),$(".arcHier",b).off("mousedown",a.onHierMouseDown),b.removeClass("arcClickable");break;case"Table":case"Column":case"Row":case"Field":var c=b.children(":first");c.length>0&&(c.off("keypress"),c.off("keydown"))}e.getHasClickEvent(b)&&(n(b),e.setHasClickEvent(b,!1)),e.getHasInputEvent(b)&&(b.off("click",a.onInput),e.setHasInputEvent(b,!1)),b.off("click.eventsetter"),b.removeClass("arcTextInputActive"),b.find(".arcTextInputSizeTarget").removeClass("arcTextInputSizeTarget")},l.setPendingBlurEvent=function(a){j=a,j&&window.setTimeout(l.executePendingBlurEvent,300)},l.executePendingBlurEvent=function(){var b=j;return j?(j=null,a.onInput(b),i.removeForm(),!0):!1},l.setPendingEvent=function(a){k=a},l.executePendingEvent=function(){var a=k;return k?(k=null,a.callback(a.event),!0):!1},l}return{createInstance:j}})